<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<script src="https://unpkg.com/rxjs/bundles/rxjs.umd.min.js"></script>
</head>
<body>


<script>
	const {Observable, interval, of} = rxjs;
	const {merge, mapTo, take, last, mergeAll, mergeMap, flatMap, zip, zipAll, concatAll} = rxjs.operators;


	let $a = [[1], of(3), rxjs.interval(500).pipe(mapTo(rxjs.interval(500).pipe(mapTo(500), take(1))), take(1)), of(50)];

	rxjs.forkJoin($a).subscribe(x => {

		console.log(x);
	})


	rxjs.forkJoin($a).subscribe(x => {

		console.log("22222", x);
	})

	setTimeout(function() {


		rxjs.forkJoin($a).subscribe(x => {

			console.log("3333", x);
		})

	}, 1000);


	// let $values = Object.create(null);
	// let module = {};
	//
	//
	// function createFactoryFromArray(array) {
	// 	let factory = array.pop();
	// 	if (typeof factory !== "function") {
	// 		throw SyntaxError(array);
	// 	}
	//
	// 	factory.$inject = array;
	// 	factory.$inject.values = Object.create(null);
	// 	return factory;
	// }
	//
	// function createFactoryFromFunction(factory) {
	// 	if (typeof factory !== "function") {
	// 		throw TypeError('factory is must be function.');
	// 	}
	//
	// 	if (Array.isArray(factory.$inject)) {
	// 		return factory;
	// 	}
	//
	// 	if (factory.length === 0) {
	// 		factory.$inject = [];
	// 		factory.$inject.values = Object.create(null);
	// 		return factory;
	// 	}
	//
	// 	let injector = factory.toString().match(/\([^)]*\)/m)[0];
	// 	factory.$inject = injector.slice(1, -1).split(/\s*,\s*/);
	// 	factory.$inject.values = Object.create(null);
	// 	return factory;
	// }
	//
	// function createFactory(object) {
	// 	if (typeof object === "function") {
	// 		return createFactoryFromFunction(object);
	// 	}
	//
	// 	if (Array.isArray(object)) {
	// 		return createFactoryFromArray(object);
	// 	}
	//
	// 	throw SyntaxError(object);
	// }
	//
	//
	// module.value = function(name, value) {
	// 	$values[name] = value;
	// };
	//
	// module.factory = function(name, mixed) {
	// 	$values[name] = new Observable(observer => {
	//
	// 		let factory = createFactory(mixed);
	// 		let ret = $values[name] = factory();
	//
	//
	// 		if (ret.subscribe) {
	// 			ret.subscribe(observer);
	// 		} else {
	// 			observer.next($values[name]);
	// 			observer.complete();
	// 		}
	// 	});
	//
	// 	return this;
	// };
	//
	// module.value("a", "A");
	// module.value("b", "B");
	// module.value("c", "C");
	//
	// module.factory("d", function(a, b, c) {
	//
	// 	// console.log("!!!!!!!!!!!!!!!!");
	//
	//
	// 	return function() {
	// 		console.log(a, b, c);
	// 	}
	// });
	//
	//
	// module.get$ = function(name) {
	// 	return Observable.of($values[name]).then()
	// };
	//
	//
	// let d = module.get$();


</script>

</body>
</html>