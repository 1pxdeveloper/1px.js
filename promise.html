<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<script src="src/js2/1px.js"></script>
</head>
<body>


<script>

// pending, fulfilled, rejected

class Promise$ {
	constructor(executor) {
		this.__calbacks = [];
		this.PromiseStatus = "pending";

		function resolve(value) {
			this.PromiseStatus = "resolved";
			this.PromiseValue = value;

			if (this.__calbacks.length) {
				let o = this.__calbacks.shift();
				value = o.onFulfilled(value);
			}
		}

		function reject() {

		}

		executor(resolve.bind(this), reject.bind(this));
	}

	then(onFulfilled, onRejected) {
		if (this.PromiseStatus === "pending") {
			this.__calbacks = this.__calbacks || [];
			this.__calbacks.push({onFulfilled, onRejected});
			return this;
		}

		return this;
	}
}




let p = new Promise$(function(resolve, reject) {

	setTimeout(function() {

		resolve(1);

	});

})
	.then(x => {

		console.log(x);

		return x + 10;

	})
	.then(y => {


		console.log(y);


		return y + 300;
	})


</script>


</body>
</html>